(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{414:function(t,s){t.exports="data:image/png;base64,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"},415:function(t,s,a){t.exports=a.p+"assets/img/fetch-frontend-page.cfced9a7.png"},416:function(t,s){t.exports="data:image/png;base64,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"},417:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPsAAAA8CAYAAACgn8yqAAABRmlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8rAwcDMwMlgwMCXmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsgsvfxpQvobGvocDqbrMlf3HsRUjwK4UlKLk4H0HyBOSy4oKmFgYEwBspXLSwpA7A4gW6QI6Cggew6InQ5hbwCxkyDsI2A1IUHOQPYNIFsgOSMRaAbjCyBbJwlJPB2JDbUXBHhcXH18FAKMTIyMPAg4l3RQklpRAqKd8wsqizLTM0oUHIGhlKrgmZesp6NgZGBkyMAACnOI6s83wGHJKMaBEMuLZ2Aw9QYy6hBiyd8ZGHZKMzAIvUKIqTQyMAjOYmDYf7QgsSgR7gDGbyzFacZGEDb3dgYG1mn//38OZ2Bg12Rg+Hv9///f2////7uMgYH5FgPDgW8A23Ve1kAFu7UAAABWZVhJZk1NACoAAAAIAAGHaQAEAAAAAQAAABoAAAAAAAOShgAHAAAAEgAAAESgAgAEAAAAAQAAAPugAwAEAAAAAQAAADwAAAAAQVNDSUkAAABTY3JlZW5zaG90HbKWsAAAAdVpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+NjA8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+MjUxPC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6VXNlckNvbW1lbnQ+U2NyZWVuc2hvdDwvZXhpZjpVc2VyQ29tbWVudD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CsOC6HgAAA7MSURBVHgB7V0JdBXVGf6TPAKBsCdBqJSwJhhi2BWpCMGl7RFUFK0W0HpOlXKsGyJwLJJD6oJWLYuUWquCuLBjT12qYhFkibIjBUyFhGCgLAFkSQgJ6f3uy33cDDPz5s17g77kvzkz997//v9///vN/ecuM5kXUyUCcWAEGIFaj0DsuXPnan0juYGMACNA5NtdsI/Ky8sZC0aAEajlCMSIkb0qJiamljeTm8cIMAKx7OjcCRiBuoFALO/P1Y0Lza1kBHhk5z7ACNQRBHhkryMXmpvJCLCzcx9gBOoIArEi1JGmcjMZgehHIO+r9a4bwZ7uGjoWZASiCwF+gy66rhdbywi4RoCn8a6hY0FGILoQ4A266LpebC0j4BoBfs7uGjoWZASiCwFes0fX9WJrGQHXCPBuvGvoWJARiC4EeBofXdeLrWUEXCPAI7tr6FiQEYguBNjZo+t6sbWMgGsEeBrvGjoWZASiCwEe2aPrerG1jIBrBHyuJW0E8RHLM2fO0OnTp8n4QUv8402D+vUpXhz16tWz0cJFjAAjEEkEPHH2kydPSkeHY+NLOOqoqKiQth86dIjatGkj0+zwkbycrIsRsEbAk2k8nB1OjO/b6YfP55N5lJ86dUoeZ8+etbaOSxgBRiBiCHjm7BjVcejOjnRcXBwdO3aMWrRoIaf6cHp2+IhdT1bECFgi4Mnrslinw7GtHB5r+fj4eGrWrBmVlpbKI1yHx7fvX5o2g+4f8wDt2LmTNm3eItMnxCwCYezjE+ib/HxLIIwFx44fp5WrvqATJ04Yi2rk//7aG7RixcoADe1ZvWYtLVy8hDZu2lRjz2LW7L/SmrXrArxeJIDBv1es8EI164xyBDx79AZnR6isrAwccGgcnTt3po8++ojWrVtHBw4coOLiYjmlDwfLpe/9g5aJ45c/v4Fat24tVSkbkFklHPe4cGAnAU46/PY76TFxg9i9p8BSZOeuXTR33lvUp3dPyfO/gwdpxKjfUO7TzwqH+5weGfs4PTx2HJ2r/oWt7llZ9MzU5zz9UY7NW7bS3qJ9ljZzQd1FwDNn16fwaoTHmh1H48aNqVu3btS+fXtq2bIlJSYmOnZEq0tVWLiXevfuRTcNHULNmjalHt2zaPbLM6ix0B1K+HT5ZzR6zO9p6JAbg4q9/c58umbA1dSouo7FS5ZSPTFjWbZoPs2aMY1mz5ohbmh5tEvcFBCuvKIvlZWWyRtBUOXMEJUIvDH3TZozd96P0nYfptxwxkgHcRehU2VltHz5cmojRtpWl1xCeXl51KNHD0pKSpKjer9+/aipcEzwfidGd7dh8pRc+vDDf0nxITcPoz89N5XKykppck4uLVuy8AK1mG38efpM+kQ4NsLg7IH06EMPyv0E7CHMmjmd0tK60JtvvS3L1Un/xj5G67ViSv7oIw/Jpw3ggTMPzs6m+uKxInh/Uv3EAcsW5DHT6Ct4MM2//rprldoa8WPjJ1KH9qm0Lu9LcZP4hq4TfMNvHUbPv/Ai5ef/V97Q/jglh5qLJRACOtbipUvp++9PiBvd+RuUbqtk5JPnCMx5cx6t37AxUM+okb8OpCOZcHttffpUN5IGxVTfQOA8WCsXFBYSHrnh5oLd+KNHj9KRI0eoUaNG0jmMz+NDsWXM6PupoqJSdPjvaaxwPtxctmzdSsX795uqeXHadFq5chXl5kwS5TE0KWcKxQl7HxEOr0Z0tdaHAjNwsfw4LupLT08L1NGje3eZxjLg8OEjtGTZe9SnT2/KFLMYFbp2TaelS5ap7AXxQbEUWL9+Az3zVK4oq6KJTzxJX3yxmnKnTKYmYkY0QeTfeXcBjRl9H73/wYeEfYAJ48dRmlgazXvnXdqxYwcNGjjgAr1M8BYBjOgbNm6iXj17yIq+2rBB9pu7R42IaMVmfdFpBT4Ie+Hw0IkDs4buwgkOHz4s1+ugwdmxkVUobgCpqalh198qJUUsDRLljSS1XbugbV+4cDGNHzeWOnfqJHlHjriLXnnlVensRmErcEtKSiQr6jaG196YS9/u3kOlYkR/+MEHKE4sXVRolZJMh8VNzi4Mv20Y9bvyCsmSlZVJKckpdHX//jL/s6v6UdG+fTL9mdgXwM3plpuGynzOpCfETMo/W5EEPl0UBHRHv2fUyECd6zf6R/lIO3ygghATPi+m8LBBrdNThDNceuml1LFjR7kx1aBBA7mBhhdsMjIy5Bo+kjYYndOYPyhmFwhTn3+Bps+cJdO48SCUimVHgrDPSVAymLIbw8xpL0nSlq3b6L7RYyg5OZn6CydFSGiQIG90MmNygr1Nm/qn6Cj2+epRw4YJAU68v6DatPvb3dR7+G2BMjzh6CD2QThcPATg6Ji69+7Vk3RHV2mM8AkJDeh27TpdPOtq1uTZmh0jODbeBg0aJHfj0UH7V49OSKenp8uRGGnwhhNU59d1WNGwIZiQkCCnxWq01OWcpps0aSpZ8WgO+w4Ir8+ZS7179qLMzAyZz7o8U7YTa/Sr+l0paZK/SZOAw0qiyclov1m+7U/b0r7i7wK6sBTaL5YXCEZ+kyqYFAEEGoq+BEe/e+SICzAHTYVIXg+3usSgGvnNOTRQTeGx+YYXaVAPYj3tE3nwuXF2NFgdClAnMezBKDtz5l/kXsIhsbx46tmp8pm8nbyqS8XJyUmSHVNqRSsu3k+5Tz0tn/NjU+6TT5fTTvHMX63jIFC4t0hsVrYKVLV7zx56UuwZlBw5GqA5TaAdixYtoVWrVxMe+z3/4ku2swanepnPOQLDb7tVOrqVBBwePJEK6Gtugydrdji2uongURQMxKijDFU3AuXoOr+Thig9Oq+4Zchd/fM0s9mCn/aHJybSpCdzaOTd90p2PAKcIjbrdL0x1aDGxvjf7z+v15/Cbjjktn29nTIuu0wSsT7/4zNT6Z57fyvzWLKM+d39lD1ooF9InL/evj2wHgdxb2ERffzxJ3TXnXdQi5bNBW5xNe2QkufbEhN7/uaIXfqCgkIaN26C5MoenE2dOnUk8d6izPOJEdAREH06jFuFrklL4yUZrB+bN28ecHJUo3bc4dy6o6tdevXPMUqVB6Yp1dKhysULPvjvvFCfxSslmLavWZtHf5v9siLJGI/2sIGHtboe8FLP9b+4kea8/iqldekSKAIu6uYYIIaQQDsqxR4IliccajcCX4onNX3F+yRugicjO9bqRUVFtHnzZulMdoZhgwtvvLVt27YGW6Qd3UxfvNjswuE0GHX86o7baYGYRm/btl28JOQf3aELjot3CYz87y5YRNddO7iGoyt+pzaY8ck2hNAOMx1MixIEwhibPRnZw4XN6CRu9LnVEaoc3h9AcPLIb/OWLdQ+NTWwoafaFWqdSo7juofAj25kD+cShNvx3ci7kVFt1J08mJ6syy+XYsH4lG6OGYFIIuDJNN6pgZHs9KHo8orXabut+EKxy0oH02s3AugjbvuJZy/VBIPcrcFKbyjyTnmd8ikb9DgcWV0PpxkBrxA4/x6nVzWY6A3HMUKRdcLrhAdNcMpn0tygJC91B62cGaIMgTBG9nAf+4SKVDgd26lsML5wy/U2B9Ol83KaEQgXgTA24+miTuPdOkYwuWDlADgYT7ByJzrsLqQT/XbyXMYIKATc9qWLtkHn1kA7ObsyAGNX7rYsXMCVvDG2s8fIy/m6iwD6idu+4tn/s+uXw41xwWSsykOlw04rGdWGYOWh8il+jhmBkBEIYx7v2X+9qUY4dRSn/Fb6vKY7tU/x6bGVbToPpxkBJwjg32Dc9qcfZDfeqlHBGmFWbkaDfjO6Gc2K146OMgQrff5S87MbGXNNTK2LCKD/uO1Dvvz8AvG9tQ6e4BaKUXa8VmVmdCPNmEdDzWhu6HYyKLMLVjbYyXAZIwAE3Pad2IJC/yeOIg1jKAbZ8ZqVgWakG2nGvALJSk7RlZwe67I6XcnYlRv5VT7SeLO+uoGA3udCbbFv69ZddMP1P9wHCu2MNytzQjPyhJoHiEYZK5oOuJmMXs5pRiBcBNDH3PYzX95XW8Ot37W8ndHGMmMelRppoeSD8Zrpt6KBroJRr6JzzAhEBIEwnD2uojIpZ8DVPSklpaWrz0OZNcBJh7fjMZaFk7eTtStT7TLygG5Gs+NXZRwzAuEigM+kuw0xXTKGVmVmtKNF86e71XGBnJ0zgNmq3IxupNnl9TI9baxTL9PTRj7kEYw8VjTJbMGvyjhmBH4oBGLSut1SVVlxhu69ZwhNHD9admw3H4BUDTBzDFWG2KrcjG6k6XmrtLEOKz4rulHeLG9FAx1B1+2nuD9HUpd7K1iyNiAQl9Tqshx8yXnDxu3yF1WuGdA3bIePBDDGTq7nvU7Dfr0OJ3m9zUZZvcxpGjoiocdpfcxX+xEQzt5VODu+WBonvhm3k1Z8voa6pncQv0IS+ho+WOe0KjfS7fJ6mVnajIbLqOgq1mnGtJs8ZBB0/X6K+Rl8doe5FFMZAfcIxLVslZ6DzzCLb79SXIyPDhw8SvMXfCB+aXQNFYhvnB8/e46oXgI1T2wgN/DQQdU0X3Vs5FXHVWUwSec15vGvteDFl1iVvN4MVa7Hug5Vn7IBZYpX0VSs5JBXdSlevX6dH+VKDrHOp+jg12X0tOJBrILiR6zqV7EqU7w6HTRjHjSjDPJ6sMsrfSo26tLp0GnMg2aUsatP8SNGUPpUbNSl03V+vQ6jjF4GGbu80q9ioy6dXlvqj0nLHObvIVXiu+7iT/y8A52rPAuoRFxOZQ0T6VSfm+lEWbn4nXGQhRPgQBDfVBdXTSRwiLUA6FgToNOJSJYJnq5J8TRxYGt6/5uT9M//lNCp8krJ17h+HN2YlkhXtG1CUz4rppLTol7orBLl4uvnMkidIiVU1q8XS20SfbTnaJkgoALwCF5Zn7/eydltKD6OaP/JCmGO/4aCGHbhxyarKv3thNNf1a4x5XxaRPlHyoUeEaSzVNcPO0To1CKevi0p8xdJ29BWAIEAHpHX6vfbX93+AB0ywj5Rvx8/ZGE/bPbbJjLVelT9ohGShnKUiaNG/YIobbSqX+murpPrr/P4/x/SKB4cM0QQ8gAAAABJRU5ErkJggg=="},418:function(t,s,a){t.exports=a.p+"assets/img/fetch-new-frontend-page.5dd824c0.png"},419:function(t,s,a){t.exports=a.p+"assets/img/fetch-new-server-console.e703a9f1.png"},460:function(t,s,a){"use strict";a.r(s);var n=a(20),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"使用fetch请求文件-并下载到本地"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用fetch请求文件-并下载到本地"}},[t._v("#")]),t._v(" 使用Fetch请求文件，并下载到本地")]),t._v(" "),n("h2",{attrs:{id:"问题描述"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#问题描述"}},[t._v("#")]),t._v(" 问题描述")]),t._v(" "),n("p",[t._v("最近遇到需要向后端请求文件，并让用户下载到本地的需求。我第一时间想到的是原生的Fetch API，正好可以测试一下如何实际使用Fetch方法请求文件。")]),t._v(" "),n("p",[t._v("然而，当我一通搜索+复制黏贴以后，自信地告诉后端同学：“只需要给我一个能请求到文件的url和文件名”之后，后端同学一句“这些具体是指什么”，把我问蒙了。")]),t._v(" "),n("p",[t._v("因此，我想着搭建一个简易的前后端传输文件的场景，来测试一下如何利用Fetch方法解决上述的需求。")]),t._v(" "),n("h2",{attrs:{id:"问题拆解"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#问题拆解"}},[t._v("#")]),t._v(" 问题拆解")]),t._v(" "),n("ol",[n("li",[t._v("前端如何使用Fetch方法，向后端请求文件。")]),t._v(" "),n("li",[t._v("前端如何将请求到的文件下载到用户本地。")])]),t._v(" "),n("h2",{attrs:{id:"解决方案"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[t._v("#")]),t._v(" 解决方案")]),t._v(" "),n("h3",{attrs:{id:"part-1-使用fetch方法-向后端请求文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#part-1-使用fetch方法-向后端请求文件"}},[t._v("#")]),t._v(" Part 1：使用Fetch方法，向后端请求文件")]),t._v(" "),n("h4",{attrs:{id:"前端"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前端"}},[t._v("#")]),t._v(" 前端")]),t._v(" "),n("p",[t._v("关于Fetch方法的使用，可以参考笔记中JS一章的对应内容。")]),t._v(" "),n("p",[t._v("大致代码："),n("code",[t._v("fetch(url).then(res => res.blob()).then(blob => {})")])]),t._v(" "),n("p",[t._v("这里我使用了请求二进制大文件的对应方法"),n("code",[t._v("res.blob()")]),t._v("。")]),t._v(" "),n("p",[t._v("特别注意的是："),n("code",[t._v("url")]),t._v("即后端同学问我的可以请求到文件的"),n("code",[t._v("url")]),t._v("，随后可以看到我在简易的后端里是如何处理这个"),n("code",[t._v("url")]),t._v("的。")]),t._v(" "),n("h4",{attrs:{id:"后端"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#后端"}},[t._v("#")]),t._v(" 后端")]),t._v(" "),n("p",[t._v("我使用nodejs搭建了一个简易的后端，代码如下：")]),t._v(" "),n("p",[t._v("index.js")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" url "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'url'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nhttp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" pathname "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pathname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 解析url")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pathname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    fs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pathname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("substr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 读取文件，文件名从pathname.substr(1)解析得到")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-type'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/html'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/json'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Access-Control-Allow-Origin'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://127.0.0.1:5500'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//成功读取文件，加上Mime类型响应头和跨域响应头")]),t._v("\n            res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 结束响应")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Server running at http://127.0.0.1:3000'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("服务器目录如下：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(414),alt:"fetch-server"}})]),t._v(" "),n("p",[t._v("需要注意以下几点：")]),t._v(" "),n("ul",[n("li",[t._v("我使用了"),n("code",[t._v("url.parse(req.url).pathname")]),t._v("获取了请求的"),n("code",[t._v("url")]),t._v("的路径名。")]),t._v(" "),n("li",[t._v("我使用了"),n("code",[t._v("fs.readFile()")]),t._v("根据处理后的路径名读取服务器上对应的文件。"),n("strong",[t._v("因为index.js和请求的文件是同一级目录，所以读取文件的路径直接写成了文件名。如果要请求的文件不在同一级目录，要修改读取文件的路径。")])]),t._v(" "),n("li",[t._v("在文件读取成功的逻辑分支里，为了解决"),n("u",[n("strong",[t._v("跨域问题")])]),t._v("，我在响应头里写入了"),n("code",[t._v("Access-Control-Allow-Origin")]),t._v("这一头部，并指定其值为前端所在的域名。")]),t._v(" "),n("li",[t._v("最后，我通过"),n("code",[t._v("res.end()")]),t._v("将读取的文件数据流作为响应内容，并结束响应。")])]),t._v(" "),n("p",[t._v("整个后端的处理逻辑：解析"),n("code",[t._v("url")]),t._v("->读取文件->设置解决跨域问题的响应头->返回文件数据")]),t._v(" "),n("h3",{attrs:{id:"part-2-将文件下载到本地"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#part-2-将文件下载到本地"}},[t._v("#")]),t._v(" Part 2：将文件下载到本地")]),t._v(" "),n("p",[t._v("前端请求到文件数据以后，还要进行一步处理，使其可以将文件下载到本地。")]),t._v(" "),n("p",[t._v("这里我使用了"),n("code",[t._v("a")]),t._v("标签，设置其"),n("code",[t._v("download")]),t._v("属性，来进行下载。其他方案可以自行百度。")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("blob")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" url "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createObjectURL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("blob"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("download "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'file1.md'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// filename")]),t._v("\n    a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" url\n    a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("click")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("revokeObjectURL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("其中注释为"),n("code",[t._v("filename")]),t._v("的地方，上例为"),n("code",[t._v("file1.md")]),t._v("，其实只是指定了用户下载到本地的文件名，可以和服务器上的文件名不一样，相当于重命名了该文件。")]),t._v(" "),n("h3",{attrs:{id:"part-3-完整流程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#part-3-完整流程"}},[t._v("#")]),t._v(" Part 3：完整流程")]),t._v(" "),n("p",[t._v("最后，附上全部代码和整体流程：")]),t._v(" "),n("h4",{attrs:{id:"前端-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前端-2"}},[t._v("#")]),t._v(" 前端")]),t._v(" "),n("p",[t._v("index.html")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DOCTYPE")]),t._v(" html"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("html lang"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"en"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("head"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("meta charset"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UTF-8"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("meta http"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("equiv"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"X-UA-Compatible"')]),t._v(" content"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"IE=edge"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("meta name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"viewport"')]),t._v(" content"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"width=device-width, initial-scale=1.0"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("title"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Fetch "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API")]),t._v(" test"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("title"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("head"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("body"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"btn"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("点击下载文件"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#btn'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'click'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://127.0.0.1:3000/file.md"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("blob")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("blob")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" url "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createObjectURL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("blob"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("download "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'file1.md'")]),t._v("\n                a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" url\n                a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("click")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("revokeObjectURL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        \n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("body"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),n("h4",{attrs:{id:"后端-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#后端-2"}},[t._v("#")]),t._v(" 后端")]),t._v(" "),n("p",[t._v("index.js")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" url "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'url'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nhttp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" pathname "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pathname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pathname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    fs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pathname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("substr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-type'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/html'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/json'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Access-Control-Allow-Origin'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://127.0.0.1:5500'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Server running at http://127.0.0.1:3000'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("h4",{attrs:{id:"流程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#流程"}},[t._v("#")]),t._v(" 流程")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("将前端index.html页面通过VSCode的live server插件架设到"),n("code",[t._v("http://127.0.0.1:5500")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(415),alt:"fetch-frontend-page"}})])]),t._v(" "),n("li",[n("p",[t._v("点击页面上的按钮，触发点击事件处理程序。在处理程序中，调用了Fetch方法向后端请求文件"),n("code",[t._v("file.md")]),t._v("，其中"),n("code",[t._v("url")]),t._v("为"),n("code",[t._v("http://127.0.0.1:3000/file.md")]),t._v("。")])]),t._v(" "),n("li",[n("p",[t._v("后端接收到请求，解析"),n("code",[t._v("url")]),t._v("，获取到"),n("code",[t._v("pathname")]),t._v("变量为"),n("code",[t._v("/file.md")]),t._v("。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(416),alt:"fetch-server-console"}})]),t._v(" "),n("ul",[n("li",[t._v("如图看到"),n("code",[t._v("pathname")]),t._v("变量为"),n("code",[t._v("/file.md")]),t._v("，应该对其进行处理才能获取对应的文件名。")])])]),t._v(" "),n("li",[n("p",[t._v("后端对"),n("code",[t._v("pathname")]),t._v("变量字符串进行切割，留下对应的文件名"),n("code",[t._v("file.md")]),t._v("，并读取文件。（注意该文件在服务器的目录结构）")])]),t._v(" "),n("li",[n("p",[t._v("后端在响应体中返回文件数据。")])]),t._v(" "),n("li",[n("p",[t._v("前端接收到文件数据，通过创建"),n("code",[t._v("a")]),t._v("标签的方法，将文件下载到本地。（下载到本地的文件名可以被重命名）")]),t._v(" "),n("p",[n("img",{attrs:{src:a(417),alt:"fetch-frontend-downloadedFile"}})])])]),t._v(" "),n("p",[t._v("因为我测试了很多遍，所以下载的文件名后跟了(3)，但是不影响我们验证了文件确实按照"),n("code",[t._v("filename")]),t._v("进行了重命名。")]),t._v(" "),n("p",[t._v("如有错误，欢迎指正！")]),t._v(" "),n("h2",{attrs:{id:"_2021-8-9-更新"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2021-8-9-更新"}},[t._v("#")]),t._v(" 2021/8/9  更新")]),t._v(" "),n("p",[t._v("在后续的debug中，我发现了上述代码实现的几个问题。这几个问题虽然看起来并没有影响代码功能，实际上只是恰好没有掉入这些坑，或者问题没有表现出来。")]),t._v(" "),n("h3",{attrs:{id:"url中的中文"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#url中的中文"}},[t._v("#")]),t._v(" url中的中文")]),t._v(" "),n("p",[t._v("请求的文件url中一旦有中文，就可能会出现意想不到的错误，比如服务端接收到的请求url是"),n("strong",[t._v("乱码")]),t._v("的。")]),t._v(" "),n("p",[t._v("这里可以用一对对应的函数 "),n("code",[t._v("encodeURI()")]),t._v(" 和 "),n("code",[t._v("decodeURI()")]),t._v("来对中文进行编码和翻译。")]),t._v(" "),n("ul",[n("li",[t._v("在前端，用"),n("code",[t._v("encodeURI()")]),t._v("对中文进行编码：")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" url "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GEELY 6AT 项目驻车换挡熄火问题调查_EAV4_孙柱.docx"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("http://127.0.0.1:3000/")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("encodeURI")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用encodeURI()编码url中的中文")]),t._v("\n\theaders"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'content-type'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/json;charset=utf-8'")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("编码出来是这样的结果：")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[t._v("GEELY%206AT%"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("%E9%A1%B9%E7%9B%AE%E9%A9%BB%E8%BD%A6%E6%8D%A2%E6%8C%A1%E7%"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("86")]),t._v("%"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("84")]),t._v("%E7%"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("81")]),t._v("%AB%E9%"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("97")]),t._v("%AE%E9%A2%"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("98")]),t._v("%E8%B0%"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("83")]),t._v("%E6%9F%A5_EAV4_%E5%AD%"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("99")]),t._v("%E6%9F%B1.docx\n")])])]),n("ul",[n("li",[t._v("在后端，以nodejs举例，可以用"),n("code",[t._v("decodeURI()")]),t._v("对编码后的url进行翻译：")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("fs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("decodeURI")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pathname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("substr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("翻译出来的结果：")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("GEELY 6AT 项目驻车换挡熄火问题调查_EAV4_孙柱.docx\n")])])]),n("p",[n("strong",[t._v("注意")]),t._v("：用其他语言可能对应的函数名不同，不一定叫"),n("code",[t._v("decodeURI")])]),t._v(" "),n("h3",{attrs:{id:"fetch-函数的两次请求"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#fetch-函数的两次请求"}},[t._v("#")]),t._v(" Fetch 函数的两次请求")]),t._v(" "),n("p",[t._v("Fetch 函数在发送非简单请求时，会先进行一次【预检请求】（请求方法为OPTION），目的是为了验证服务器是否可以处理非简单请求。")]),t._v(" "),n("p",[t._v("预检请求被通过以后，才会再进行【真正的GET/POST等请求】，"),n("strong",[t._v("真正去服务器请求资源")]),t._v("。")]),t._v(" "),n("p",[t._v("这类似于如下的场景：")]),t._v(" "),n("p",[t._v("浏览器（发送OPTION请求）：我的请求可不简单，服务器你这能处理吗？")]),t._v(" "),n("p",[t._v("服务器（收到OPTION请求）：我能行（返回200）。")]),t._v(" "),n("p",[t._v("浏览器（收到响应码200，再发送GET/POST...请求）：那我这次真的来请求资源啦。")]),t._v(" "),n("p",[t._v("服务器（收到GET/POST...请求）：好的，给你（200）/ 抱歉，我没有（404）。")]),t._v(" "),n("p",[t._v("至于什么样的请求是【简单请求】，详情自行百度。")]),t._v(" "),n("p",[t._v("在本例中，虽然使用的请求方法 GET 是简单请求方法。但是我们还设置了头部 Content-type，其值为 application/json，这一点使得该请求不再属于【简单请求】。")]),t._v(" "),n("ul",[n("li",[t._v("对于【简单请求】，fetch 只会发送一次请求。")]),t._v(" "),n("li",[t._v("对于跨域且【非简单请求】，fetch 才会发送两次请求。")])]),t._v(" "),n("p",[n("strong",[t._v("后端再处理请求时，务必要注意对两次不同请求的不同处理！")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("method "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GET'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 处理第二次的请求方法为GET的请求")]),t._v("\n        fs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("decodeURI")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pathname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("substr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// decodeURI()将url中用encodeURI()编码过的中文进行翻译")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-type'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/json;charset=utf-8'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/json;charset=utf-8'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果是GET以外的请求，返回200。此处是为了 直接通过 第一次的请求方法为OPTION的请求。")]),t._v("\n        res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/html;charset=utf-8'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"错误处理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#错误处理"}},[t._v("#")]),t._v(" 错误处理")]),t._v(" "),n("p",[t._v("如果后端因找不到请求的文件而返回404，之前的代码就可能直接把整个响应作为文件的二进制数据，生成一个文件，从而导致非预期的结果。")]),t._v(" "),n("p",[t._v('（用户：我的文件怎么只有两行内容，一行是"code"，一行是"message":"404 Not Found ..." ？？？）')]),t._v(" "),n("p",[t._v("因此我们在前端的代码中添加错误处理代码：")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("http://127.0.0.1:3000/")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("encodeURI")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用encodeURI()编码url中的中文")]),t._v("\n\theaders"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'content-type'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/json;charset=utf-8'")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// res为第一次请求方法为OPTION的请求的响应，用于确认服务器是否具有响应功能")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ok"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("blob")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 若第一次请求通过，则再发送GET请求去请求文件")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 错误处理")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" err "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("statusText"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\terr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" res\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("blob")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对GET请求的响应数据进行处理，实现用户本地下载文件")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" url "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createObjectURL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("blob"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ta"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("download "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" filename\n\ta"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" url\n\ta"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("click")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\twindow"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("revokeObjectURL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 错误处理")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("另外一小点需要注意的是：")]),t._v(" "),n("ul",[n("li",[t._v("使用"),n("code",[t._v("res.blob()")]),t._v("会把响应的数据直接转换成二进制数据，所以直接填到生成的文件中（因为数据表示的本质就是二进制，所以响应的数据无论是什么牛鬼蛇神，都能转）")]),t._v(" "),n("li",[t._v("使用"),n("code",[t._v("res.json()")]),t._v("，响应的数据会以json格式返回，所以如果不用"),n("code",[t._v("JSON.parse()")]),t._v("方法先解析json格式数据，就没办法填到生成的文件中（会报错）。")])]),t._v(" "),n("p",[t._v("第二种方法便于调试，因为这样可以检测出之前代码的问题。（响应体可不是json格式的数据，会报错哦）")]),t._v(" "),n("p",[t._v("但为了最少地修改代码（懒），所以修改后的演示代码保持第一种。")]),t._v(" "),n("h3",{attrs:{id:"修改后的演示代码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#修改后的演示代码"}},[t._v("#")]),t._v(" 修改后的演示代码")]),t._v(" "),n("p",[t._v("前端 index.html")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DOCTYPE")]),t._v(" html"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("html lang"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"en"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("head"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("meta charset"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UTF-8"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("meta http"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("equiv"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"X-UA-Compatible"')]),t._v(" content"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"IE=edge"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("meta name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"viewport"')]),t._v(" content"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"width=device-width, initial-scale=1.0"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("title"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Fetch "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API")]),t._v(" test"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("title"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("head"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("body"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"btn"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("点击下载文件"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#btn'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'click'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" url "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GEELY 6AT 项目驻车换挡熄火问题调查_EAV4_孙柱.docx"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" filename "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"file1.docx"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" filename"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" filename")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            \n            console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("encodeURI")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用encodeURI()编码url中的中文")]),t._v("\n\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("http://127.0.0.1:3000/")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("encodeURI")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用encodeURI()编码url中的中文")]),t._v("\n                headers"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'content-type'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/json;charset=utf-8'")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// res为第一次请求方法为OPTION的请求的响应，用于确认服务器是否具有响应功能")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ok"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("blob")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 若第一次请求通过，则再发送GET请求去请求文件")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 错误处理")]),t._v("\n                    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" err "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("statusText"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" res\n                    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("blob")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对GET请求的响应数据进行处理，实现用户本地下载文件")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" url "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createObjectURL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("blob"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("download "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" filename\n                    a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" url\n                    a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("click")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("revokeObjectURL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 错误处理")]),t._v("\n                console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        \n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("body"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),n("p",[t._v("后端 index.js")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" url "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'url'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nhttp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" pathname "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pathname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("decodeURI")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pathname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("substr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// decodeURI()将url中用encodeURI()编码过的中文进行翻译")]),t._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 为所有响应设置跨域头部")]),t._v("\n    res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Access-Control-Allow-Headers"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"content-type,XXX"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Access-Control-Allow-Methods"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Access-Control-Allow-Origin"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Access-Control-Allow-Credentials"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("method "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GET'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 处理第二次的请求方法为GET的请求")]),t._v("\n        fs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("decodeURI")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pathname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("substr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// decodeURI()将url中用encodeURI()编码过的中文进行翻译")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-type'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/json;charset=utf-8'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/json;charset=utf-8'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果是GET以外的请求，返回200。此处是为了 直接通过 第一次的请求方法为OPTION的请求。")]),t._v("\n        res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/html;charset=utf-8'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Server running at http://127.0.0.1:3000'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("（"),n("strong",[t._v("我对每个请求做了统一的跨域头部设置，因为两次请求都是跨域的")]),t._v("）")]),t._v(" "),n("h4",{attrs:{id:"前端页面效果"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前端页面效果"}},[t._v("#")]),t._v(" 前端页面效果")]),t._v(" "),n("p",[n("img",{attrs:{src:a(418),alt:"fetch-new-frontend-page"}})]),t._v(" "),n("h4",{attrs:{id:"后端命令行输出"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#后端命令行输出"}},[t._v("#")]),t._v(" 后端命令行输出")]),t._v(" "),n("p",[n("img",{attrs:{src:a(419),alt:"fetch-new-server-console"}})])])}),[],!1,null,null,null);s.default=e.exports}}]);